# Устранение проблем

## Ошибка сессий "Session cannot be started after headers have already been sent"

### Что исправлено:

1. **Буферизация вывода** - добавлен `ob_start()` в начало всех PHP файлов
2. **Раннее начало сессии** - `session_start()` перенесен в самое начало `index.php`
3. **Настройки PHP** - создан `.htaccess` с правильными настройками
4. **Проверка сессий** - улучшена логика в классе `Session`

### Шаги для устранения:

1. **Запустите диагностику**:
   ```
   http://ваш-сайт.ru/debug.php
   ```

2. **Если проблема остается**:
   - Проверьте кодировку файлов (должна быть UTF-8 без BOM)
   - Убедитесь, что нет пробелов перед `<?php`
   - Очистите кэш браузера

3. **Проверка файлов**:
   ```bash
   # Проверка на BOM
   head -c 3 index.php | od -c
   # Не должно показывать: \357 \273 \277
   ```

### Возможные причины:

- **BOM (Byte Order Mark)** в файлах
- **Пробелы или символы** перед `<?php`
- **Вывод контента** до `session_start()`
- **Неправильная кодировка** файлов

### Дополнительные настройки PHP:

Добавьте в `php.ini` или `.htaccess`:
```
output_buffering = On
session.auto_start = Off
```

### Если ничего не помогает:

1. Пересохраните все PHP файлы в UTF-8 без BOM
2. Проверьте права доступа к директории сессий
3. Обратитесь к хостинг-провайдеру

## Тестирование

После исправлений проверьте:
- [ ] Главная страница загружается без ошибок
- [ ] Регистрация работает
- [ ] Авторизация работает
- [ ] Профиль пользователя доступен
- [ ] Выход из системы работает

## Логи ошибок

Проверьте логи ошибок PHP:
- cPanel: Файлы -> error_logs
- Прямой доступ: `/var/log/apache2/error.log`
- PHP лог: часто в корне сайта `error_log` 